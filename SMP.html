<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statut LeNoobInconnu SMP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap');

        :root {
            --mc-green: #55FF55;
            --mc-red: #ff5555;
            --mc-dark: #1e1e1e;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f0f0f;
            color: white;
            overflow-x: hidden;
        }

        .bg-animate {
            background: linear-gradient(45deg, #0f0f0f, #1a1a1a, #0f0f0f);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .floating {
            animation: floating 3s ease-in-out infinite;
        }

        @keyframes floating {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .glow {
            box-shadow: 0 0 30px rgba(85, 255, 85, 0.15);
        }

        .status-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }

        .copy-feedback {
            display: none;
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--mc-green);
            color: black;
            padding: 6px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 800;
            z-index: 50;
            box-shadow: 0 4px 15px rgba(85, 255, 85, 0.4);
            white-space: nowrap;
        }

        .player-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .player-card:hover {
            transform: scale(1.05);
            background: rgba(85, 255, 85, 0.1);
            border-color: rgba(85, 255, 85, 0.4);
            box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.5);
        }

        .player-head {
            image-rendering: pixelated;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            background-color: rgba(0,0,0,0.2);
            border: 2px solid rgba(255,255,255,0.1);
        }
    </style>
</head>
<body class="bg-animate min-h-screen flex items-center justify-center p-4">

    <!-- Décoration d'arrière-plan -->
    <div class="absolute inset-0 opacity-10 pointer-events-none">
        <svg width="100%" height="100%">
            <rect width="10" height="10" x="10%" y="20%" fill="#55FF55" class="floating" style="animation-delay: 0s;"></rect>
            <rect width="15" height="15" x="85%" y="15%" fill="#55FF55" class="floating" style="animation-delay: 1s;"></rect>
            <rect width="8" height="8" x="40%" y="75%" fill="#55FF55" class="floating" style="animation-delay: 2s;"></rect>
            <rect width="12" height="12" x="70%" y="60%" fill="#55FF55" class="floating" style="animation-delay: 1.5s;"></rect>
        </svg>
    </div>

    <main class="relative z-10 text-center max-w-4xl w-full py-12">
        <!-- Logo -->
        <div class="mb-6 inline-block">
            <div class="w-20 h-20 bg-[#55FF55] rounded-2xl flex items-center justify-center glow floating mx-auto">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-black" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></svg>
            </div>
        </div>

        <h1 class="text-4xl md:text-6xl font-black mb-2 tracking-tighter uppercase">
            Statut du <span class="text-[#55FF55]">Serveur</span>
        </h1>
        
        <!-- Carte de Statut Principale -->
        <div class="bg-white/5 border border-white/10 backdrop-blur-xl rounded-[2.5rem] p-6 md:p-10 mb-8 mt-8 shadow-2xl">
            <div class="flex flex-col md:flex-row justify-between items-center gap-8 mb-10 text-center md:text-left">
                
                <!-- Info Serveur -->
                <div class="w-full md:w-1/2">
                    <div class="flex items-center justify-center md:justify-start gap-3 mb-2">
                        <div id="status-indicator" class="w-4 h-4 rounded-full bg-gray-500"></div>
                        <span id="status-text" class="text-gray-400 font-bold uppercase tracking-widest text-xs">Vérification...</span>
                    </div>
                    <h2 id="server-motd" class="text-2xl font-black text-white mb-1 tracking-tight text-center md:text-left">Chargement du serveur...</h2>
                    <p id="server-version" class="text-gray-500 text-sm font-medium">Recherche de la version...</p>
                </div>

                <!-- Nombre de Joueurs -->
                <div class="bg-black/40 rounded-3xl p-6 flex flex-col items-center justify-center min-w-[200px] border border-white/5">
                    <span class="text-gray-500 text-xs uppercase font-black tracking-widest mb-2">Joueurs connectés</span>
                    <div class="text-5xl font-black text-[#55FF55]">
                        <span id="players-online">0</span><span class="text-gray-700">/</span><span id="players-max" class="text-gray-500">0</span>
                    </div>
                </div>
            </div>

            <!-- SECTION JOUEURS EN LIGNE -->
            <div id="players-section" class="hidden mb-12">
                <div class="flex items-center gap-4 mb-8">
                    <div class="h-[1px] flex-1 bg-white/10"></div>
                    <span class="text-[10px] text-gray-500 font-black uppercase tracking-[0.4em]">Joueurs en ligne</span>
                    <div class="h-[1px] flex-1 bg-white/10"></div>
                </div>
                <!-- Grille des joueurs -->
                <div id="players-list" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
                    <!-- Les cartes joueurs apparaîtront ici -->
                </div>
            </div>

            <!-- Section des IPs -->
            <div class="flex flex-col gap-6">
                <!-- Java -->
                <div class="relative group bg-white/5 p-8 rounded-3xl border border-white/10 transition-all flex flex-col gap-6">
                    <div id="copy-java" class="copy-feedback">Copié !</div>
                    <div class="text-center lg:text-left">
                        <span class="text-sm text-[#55FF55] font-black uppercase tracking-widest block mb-4">Java Edition (PC)</span>
                    </div>
                    <div class="bg-black/30 p-6 rounded-2xl border border-white/5 flex flex-col sm:flex-row items-center justify-between gap-4">
                        <div class="text-left">
                            <span class="text-[10px] text-gray-500 font-bold uppercase block">IP de connexion</span>
                            <code class="text-2xl md:text-3xl font-mono text-white tracking-tight">91.197.6.19:28146</code>
                        </div>
                        <button onclick="copyIP('91.197.6.19:28146', 'java')" class="bg-[#55FF55] hover:bg-white text-black px-6 py-4 rounded-xl font-black text-sm transition-all flex items-center gap-2 uppercase shadow-lg">
                            Copier
                        </button>
                    </div>
                </div>

                <!-- Bedrock -->
                <div class="relative group bg-white/5 p-8 rounded-3xl border border-white/10 transition-all flex flex-col gap-6">
                    <div id="copy-bedrock" class="copy-feedback">Copié !</div>
                    <div class="text-center lg:text-left">
                        <span class="text-sm text-[#55FF55] font-black uppercase tracking-widest block mb-4">Bedrock Edition (Mobile/Console)</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
                        <div class="bg-black/30 p-4 rounded-2xl border border-white/5 flex items-center justify-between gap-4">
                            <div class="text-left">
                                <span class="text-[10px] text-gray-500 font-bold uppercase block">IP</span>
                                <code class="text-xl font-mono text-white">91.197.6.19</code>
                            </div>
                            <button onclick="copyIP('91.197.6.16', 'bedrock')" class="bg-white/10 hover:bg-white hover:text-black text-white p-3 rounded-xl transition-all">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                            </button>
                        </div>
                        <div class="bg-black/30 p-4 rounded-2xl border border-white/5 flex items-center justify-between gap-4">
                            <div class="text-left">
                                <span class="text-[10px] text-gray-500 font-bold uppercase block">Port</span>
                                <code class="text-xl font-mono text-white">28146</code>
                            </div>
                            <button onclick="copyIP('26781', 'bedrock')" class="bg-white/10 hover:bg-white hover:text-black text-white p-3 rounded-xl transition-all">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tuto -->
            <div class="mt-10">
                <a href="https://youtu.be/te-PyEU928Q?si=FtdGZSXDy2ub_33c" target="_blank" class="w-full inline-flex items-center justify-center gap-4 bg-[#55FF55] text-black px-8 py-6 rounded-[2rem] font-black text-lg hover:scale-[1.02] transition-transform shadow-[0_15px_30px_-10px_rgba(85,255,85,0.5)]">
                    TUTO POUR REJOINDRE
                </a>
            </div>
        </div>

        <!-- Social -->
        <div class="flex flex-wrap justify-center gap-8 opacity-60">
            <a href="https://discord.gg/uN78XcdHr7" target="_blank" class="text-sm font-black tracking-widest hover:text-[#55FF55] uppercase">Discord</a>
            <span class="text-gray-800">|</span>
            <a href="https://www.youtube.com/@LeNoobInconnu" target="_blank" class="text-sm font-black tracking-widest hover:text-[#55FF55] uppercase">Youtube</a>
        </div>
    </main>

    <script>
        const SERVER_IP = "91.197.6.16";
        const SERVER_PORT = "28146";
        // URL de l'image par défaut (Steve)
        const DEFAULT_HEAD = "https://crafatar.com/avatars/MHF_Steve?size=128&overlay";

        async function updateStatus() {
            const statusIndicator = document.getElementById('status-indicator');
            const statusText = document.getElementById('status-text');
            const playersOnline = document.getElementById('players-online');
            const playersMax = document.getElementById('players-max');
            const serverMotd = document.getElementById('server-motd');
            const serverVersion = document.getElementById('server-version');
            const playersSection = document.getElementById('players-section');
            const playersList = document.getElementById('players-list');

            try {
                const response = await fetch(`https://api.mcsrvstat.us/2/${SERVER_IP}:${SERVER_PORT}`);
                const data = await response.json();

                if (data.online) {
                    statusIndicator.className = "w-4 h-4 rounded-full bg-[#55FF55] status-pulse shadow-[0_0_15px_#55FF55]";
                    statusText.innerText = "Serveur en ligne";
                    statusText.className = "text-[#55FF55] font-black uppercase tracking-widest text-xs";
                    
                    playersOnline.innerText = data.players.online;
                    playersMax.innerText = data.players.max;
                    
                    serverMotd.innerText = data.motd && data.motd.clean ? data.motd.clean[0] : "Bienvenue sur le serveur !";
                    serverVersion.innerText = data.version || "Minecraft";

                    if (data.players.list && data.players.list.length > 0) {
                        playersSection.classList.remove('hidden');
                        playersList.innerHTML = '';
                        
                        data.players.list.forEach(playerName => {
                            const card = document.createElement('div');
                            card.className = "player-card rounded-2xl p-4 flex flex-col items-center gap-3";
                            
                            const headUrl = `https://crafatar.com/avatars/${playerName}?size=128&overlay`;
                            
                            card.innerHTML = `
                                <img src="${headUrl}" 
                                     class="player-head w-16 h-16 rounded-xl block" 
                                     alt="${playerName}"
                                     onerror="this.onerror=null; this.src='${DEFAULT_HEAD}'">
                                <span class="text-[11px] font-bold text-white tracking-tight truncate w-full text-center">
                                    ${playerName}
                                </span>
                            `;
                            playersList.appendChild(card);
                        });
                    } else {
                        fetchMinetoolsPlayers();
                    }
                } else {
                    statusIndicator.className = "w-4 h-4 rounded-full bg-[#ff5555] shadow-[0_0_15px_#ff5555]";
                    statusText.innerText = "Serveur hors ligne";
                    statusText.className = "text-[#ff5555] font-black uppercase tracking-widest text-xs";
                    serverMotd.innerText = "Maintenance en cours";
                    playersOnline.innerText = "0";
                    playersSection.classList.add('hidden');
                }
            } catch (e) {
                console.error("Erreur de statut:", e);
                statusText.innerText = "Erreur de connexion";
            }
        }

        async function fetchMinetoolsPlayers() {
            const playersSection = document.getElementById('players-section');
            const playersList = document.getElementById('players-list');
            
            try {
                const response = await fetch(`https://api.minetools.eu/query/${SERVER_IP}/${SERVER_PORT}`);
                const data = await response.json();
                
                if (data.Playerlist && data.Playerlist.length > 0) {
                    playersSection.classList.remove('hidden');
                    playersList.innerHTML = '';
                    
                    data.Playerlist.forEach(playerName => {
                        const card = document.createElement('div');
                        card.className = "player-card rounded-2xl p-4 flex flex-col items-center gap-3";
                        
                        card.innerHTML = `
                            <img src="https://crafatar.com/avatars/${playerName}?size=128&overlay" 
                                 class="player-head w-16 h-16 rounded-xl block" 
                                 alt="${playerName}"
                                 onerror="this.onerror=null; this.src='${DEFAULT_HEAD}'">
                            <span class="text-[11px] font-bold text-white tracking-tight truncate w-full text-center">
                                ${playerName}
                            </span>
                        `;
                        playersList.appendChild(card);
                    });
                }
            } catch (e) {
                console.log("Minetools fallback failed or no players.");
            }
        }

        function copyIP(text, id) {
            const el = document.createElement('textarea');
            el.value = text;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);

            const feedback = document.getElementById('copy-' + id);
            feedback.style.display = 'block';
            setTimeout(() => feedback.style.display = 'none', 2000);
        }

        updateStatus();
        setInterval(updateStatus, 30000);
    </script>
</body>
</html>
